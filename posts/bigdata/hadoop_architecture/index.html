<!doctype html>

<html lang="en">

<head>
  <title>하둡 아키텍처 - Bigdata Engineer &amp; Analyst Story</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Kiera: A Hugo theme for creative and technical writing." />
<meta name="author" content="Sungwoon Yoon" /><meta property="og:title" content="하둡 아키텍처" />
<meta property="og:description" content="하둡 아키텍쳐 하둡은 분산파일시스템 HDFS(Hadoop Distributed File System)과 분산처리 기술인 MapReduce 기술이 결합된 기술이다.         하둡(Hadoop) = HDFS(Big file system) &#43; MapReduce(분산처리 시스템)    하둡 클러스터 동작 방식 독립 모드(Standalone Mode)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ynebula.github.io/posts/bigdata/hadoop_architecture/" />
<meta property="article:published_time" content="2020-12-27T15:28:31+09:00" />
<meta property="article:modified_time" content="2020-12-27T15:28:31+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="하둡 아키텍처"/>
<meta name="twitter:description" content="하둡 아키텍쳐 하둡은 분산파일시스템 HDFS(Hadoop Distributed File System)과 분산처리 기술인 MapReduce 기술이 결합된 기술이다.         하둡(Hadoop) = HDFS(Big file system) &#43; MapReduce(분산처리 시스템)    하둡 클러스터 동작 방식 독립 모드(Standalone Mode)"/>

<meta name="generator" content="Hugo 0.78.1" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://ynebula.github.io/fontawesome/css/all.min.css" />
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  
  
  <link rel="stylesheet" type="text/css" href="https://ynebula.github.io/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://ynebula.github.io/">Bigdata Engineer &amp; Analyst Story</a>
            </h1>

      <ul id="social-media">
             <li>
               <a href="https://www.facebook.com/username" title="Facebook">
               <i class="fab fa-facebook fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://github.com/ynebula" title="GitHub">
               <i class="fab fa-github fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://linkedin.com/in/%EC%84%B1%EC%9A%B4-%EC%9C%A4-a9bb30135/" title="LinkedIn">
               <i class="fab fa-linkedin fa-lg"></i>
               </a>
             </li>
             <li>
               <a href="https://www.instagram.com/sungwoon.yoon" title="Instagram">
               <i class="fab fa-instagram fa-lg"></i>
               </a>
             </li>
      </ul>
      
      <p><em>A Hugo theme for creative and technical writing</em></p>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://ynebula.github.io/tags">
                <i class="fa-li fa  fa-lg"></i><span>Tags</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://ynebula.github.io/categories">
                <i class="fa-li fa  fa-lg"></i><span>Categories</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>하둡 아키텍처</h1>

    
      <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2020-12-27T15:28:31&#43;09:00">Dec 27, 2020</time>
        </li>
        
        

        

        <li>4 minutes read</li>
    </ul>
</aside>

    

    
<div class="featured_image">
    <a href="https://ynebula.github.io/posts/bigdata/hadoop_architecture/" title="하둡 아키텍처">
        <img src="">
    </a>
</div>



    <h3 id="하둡-아키텍쳐">하둡 아키텍쳐</h3>
<p><img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_01.jpg" alt="alt text" title="Hadoop Architecture"></p>
<h4 id="하둡은-분산파일시스템-hdfshadoop-distributed-file-system과-분산처리-기술인-mapreduce-기술이-결합된-기술이다">하둡은 분산파일시스템 HDFS(Hadoop Distributed File System)과 분산처리 기술인 MapReduce 기술이 결합된 기술이다.</h4>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">하둡(Hadoop) = HDFS(Big file system) + MapReduce(분산처리 시스템)</td>
</tr>
</tbody>
</table>
<h3 id="하둡-클러스터-동작-방식">하둡 클러스터 동작 방식</h3>
<p>독립 모드(Standalone Mode)<br>
<img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_05.jpg" alt="alt text" title="Single Mode"></p>
<ul>
<li>데몬 프로세스 없이 모든 프로그램이 하나의 JVM에서 동작하는 모드</li>
<li>맵리듀스 프로그램을 동작시키고 개발 테스트하는 동안에 사용</li>
<li>HDFS를 사용하지 않고 로컬 파일 시스템을 사용</li>
</ul>
<p>의사분산 모드(Pesudo-distributed Mode)<br>
<img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_06.jpg" alt="alt text" title="Pesudo-distributed Mode"></p>
<ul>
<li>1대의 컴퓨터에 하둡 데몬 프로세스가 여러 개 분리되어 동작하는 모드</li>
<li>클러스터를 테스트, 디버깅, 프로토 타이핑하는 경우에 사용</li>
<li>HDFS 사용</li>
</ul>
<p>완전분사 모드(Fully distributed Mode)<br>
<img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_07.jpg" alt="alt text" title="Fully distributed Mode"></p>
<ul>
<li>하둡 데몬 프로세스가 클러스터로 구성된 여러 개의 컴퓨터에 나누어 동작</li>
<li>빅데이터 분산 처리 시스템으로 동작</li>
<li>데이터 노드에 분산 저장되며 이들에 대한 메타정보는 네임 노드에서 관리</li>
</ul>
<h3 id="hdfshadoop-distributed-file-system-분산파일시스템">HDFS(Hadoop Distributed File system)-분산파일시스템</h3>
<ul>
<li>HDFS는 물리적으로 나눠져 있는 서버를 논리적으로 하나의 서버 형태로 구현한 파일시스템</li>
<li>HDFS는 네임노드(마스터), 데이터노드(슬레이브)로 구성</li>
<li>HDFS는 Write Once Read Many 즉 한번 쓰고 여러 번 읽는 시스템에 적합고 큰 파일을 주로 다루기 때문에 데이터를 추가(Append) 방식이 아닌 덮어쓰기(Overwrite) 방식으로 제공</li>
<li>큰 파일을 여러 개의 블록으로 나누어 저장하고(블록단위) 블록사이즈는 64M 또는 128M를 많이 사용며, 동일한 블록을 여러 군데에 복사하는 복제수(Replication Factor)를 지원</li>
</ul>
<h3 id="mapredue-분산처리시스템-프레임워크">MapRedue-분산처리시스템 프레임워크</h3>
<ul>
<li>MapReduce는 잡트래커(마스터), 태스크트래커(슬레이브)로 구성</li>
<li>Job은 하나의 MapReduce 프로그램 말하며, 하나의 잡은 여러 개의 Map Task와 Reduce Task로 이루어져 있음</li>
<li>입력데이터/출력데이터는 반드시 HDFS사에 존재해야 하며, Task Tracker는 DataNode와 같은 물리서버에 존재</li>
<li>일정한 크기로 데이터를 분할</li>
<li>여러 컴퓨터에서 병렬 처리</li>
<li>결과를 통합하여 죄종 결과를 완성</li>
</ul>
<h3 id="mapreduce-동작-방법">MapReduce 동작 방법</h3>
<p>Word Count를 예제로 MapReduce동작 방법을 알아보겠다.<br>
<img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_02.jpg" alt="alt text" title="MapReduce 동작 방법"></p>
<ul>
<li>Input은 데이터 의미를 의미며, 데이터를 Mapper의 수만큼 나누는데 이것이 Splitting</li>
<li>Splitting은 데이터를 물리적으로 나눠서 Mapper에 넣는 행위를 수행</li>
<li>Mapper는 데이터를 Key/Value 형태로 처리하고 Reducer로 가기 전 Shuffle/Sort 단계에서 Key를 기준으로 정렬하고 Reducer로 보냄</li>
</ul>
<h3 id="하둡의-데이터-처리-방식">하둡의 데이터 처리 방식</h3>
<p>데이터 블록 전송 단계</p>
<ul>
<li>하나의 파일(데이터)을 여러 블록으로 나누어 클러스터에 있는 데이터 노드들에 분산 저장
데이터 블록 복제 단계</li>
<li>하나의 블록은 여러 개의 복제본을 생성하여 분산 저장
프로그램 코드를 노드에 전송 단계</li>
<li>패키지 된 프로그램 코드를 해당 노드들에게 전달
데이터 병렬 처리 단계</li>
<li>데이터를 병렬 처리하고 그 결과를 HDFS에 저장
19강 4분 20초 이미지</li>
</ul>
<h3 id="hadoop2">Hadoop2</h3>
<p><img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_03.jpg" alt="alt text" title="Hadoop1/Hadoop2 Architecture"><br>
<img src="https://raw.githubusercontent.com/ynebula/ynebula.github.io/main/posts/bigdata/img/hadoop_architecture_04.jpg" alt="alt text" title="HDFS and YARN"><br>
Hadoop1</p>
<ul>
<li>2계층(HDFS계층과 MR계층)으로 구성</li>
<li>맵리듀스 처리와 자원관리 기능 수행</li>
</ul>
<p>Hadoop1의 약점</p>
<ul>
<li>배치에 최적화되어 있음(리얼타임에 약함)</li>
<li>MapReduce만 지원함.</li>
<li>잡트래커가 하나가 MapReduce을 관리와 시스템 자원 관리를 같이하여 무리가 있었음.</li>
<li>맵/리듀스 작업의 자원활용에 문제점이 있음</li>
</ul>
<p>Hadoop2</p>
<ul>
<li>HDFS 계층과 MR 계층 중간에 <strong>자원관리</strong> 를 담당하는 <strong>YARN</strong> (Yet Another Resource Negotiator) 계층 추가</li>
</ul>
<h3 id="yarn-yet-another-resource-negotiator">Yarn (Yet Another Resource Negotiator)</h3>
<ul>
<li>HDFS 계층과 MR 계층 중간에 <strong>YARN</strong> 을 구성해 <strong>리소스(자원)관리</strong> 수행 (MapReduce - YARN - HDFS)</li>
<li>MapReduce이외의 데이터 처리 모듈이 하위의 HDFS를 공유할 수 있음 즉, 여러 Data Processing 지원</li>
<li>자원을 다양한 응용 프로그램에 효율적으로 할당하고 사용자 응용 프로그램을 효율적으로 스케줄링 함</li>
<li><strong>애플리케이션마스터</strong> (AM-Application Master)가 애플리케이션 별로 리소스를 관리함 작업을 관리
<ul>
<li>잡트래커 하나가 전체 시스템을 관리하는 형태에서 애프리케이션 별로 관리함</li>
<li>잡트래커+태스트트래커 -&gt; 리소스매니저+노드매니저</li>
<li>시스템 리소스 관리와 잡 관리를 분리</li>
</ul>
</li>
<li>클러스터의 자원을 컨테이너(Container)로 분할
<ul>
<li>컨테이너는 할당되는 CPU 코어 수와 메모리 용량으로 정의됨</li>
</ul>
</li>
<li>실행 중인 컨테이너들을 모니터링 함
<ul>
<li>컨테이너가 자원(CPU, 메모리, 디스크, 네트워크 등)의 최대 할당량을 초과하지 않게 억제</li>
</ul>
</li>
<li>클러스터의 자원을 컨테이너로 관리함으로써 분산 시스템을 전체적으로 원활하게 운영함</li>
<li>클러스터의 자원을 다수의 응용 프로그램에 공평한 방식으로 공유함</li>
<li>자원 관리자(Resource Manager)
<ul>
<li>다양한 응용 프로그램에 자원을 할당</li>
</ul>
</li>
<li>응용 프로그램 마스터(Application Master)
<ul>
<li>프로세스의 실행을 모니터링</li>
<li>자원 관리자에게 자원을 요청</li>
</ul>
</li>
</ul>
<h3 id="hdfs">HDFS</h3>
<p>마스터 노드(네임 노드)</p>
<ul>
<li>파일의 메타 정보를 관리, 네임스페이스 관리
<ul>
<li>실제 데이터는 데이터 노드에 분산 저장</li>
</ul>
</li>
<li>메모리상에서 처리해야 할 작업이 많음</li>
<li>클라이언트로부터 특정 파일 요구 발생 시 파일을 보관하고 있는 블록들에 대한 정보를 통해 실제 데이터가 보관된 데이터 노드의 위치를 알려줌</li>
</ul>
<p>슬레이브 노드(데이터 노드)</p>
<ul>
<li>작업을 실제 데이터 작업을 수행하는 역할</li>
<li>대용향 디스크 요구</li>
<li>노드 간 블록 이동은 최소화하도록 구성</li>
</ul>
<h3 id="주키퍼zookeeper의-도입-배경--active-standby">주키퍼(Zookeeper)의 도입 배경- Active-Standby</h3>
<ul>
<li>Hadoop1.0은 네임노드와 세컨더리 네임노드가 동시에 다운될 경우 시스템 전체 장애가 발생하는SPOF(Single Point Of Failure) 문제를 가지고 있음</li>
<li>주키퍼는 이 문제를 해결하기 위한 방법으로 네임노드 고가용성(HA)가 가능하도록 구성</li>
<li>여러 개의 네임노드 중 하나가 Active 상태이고 나머지 네임노드는 Standby 상태로 대기함 즉, 리소스매니저 이중화로 구성</li>
</ul>
<h3 id="주키퍼zookeeper---coordination">주키퍼(Zookeeper) - Coordination</h3>
<ul>
<li>분산 환경에서 노드 간에 조정자 역할을 수행하는 서비스</li>
<li>노드 간 정보 공유, 잠금, 이벤트 등의 기능 수행</li>
<li>여러 개의 노드에 작업을 분산시켜주는 부하 분산 기능 제공</li>
<li>서버에서 처리된 결과를 다른 서버에게 동기화 할 때 Lock 처리 수행</li>
<li>장애 상황 판단 및 복구 기능(서버 장애 시 대기 서버가 기존 서버를 대신 처리함)</li>
</ul>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://ynebula.github.io/posts/bigdata/what_is_bigdata_system_/"><i class="fa fa-chevron-circle-left"></i> 빅데이터 시스템이란</a>
        </li>
        
        
        <li>
            <a href="https://ynebula.github.io/posts/bigdata/yarn/">Yarn <i class="fa fa-chevron-circle-right"></i> </a>
        </li>
        
    </ul>
</section>
  
    
    
        <section class="comments-block">
      <button id="show-comments" style="display: none;"><i class="fa fa-comments"></i> Add/View Comments</button>
</section>

<section id="disqus_thread"></section>

<script>
      (function () {
            
            
            if (window.location.hostname == "localhost")
                  return;

            var disqus_loaded = false;
            var disqus_shortname = 'myShortName';
            var disqus_button = document.getElementById("show-comments");

            var disqus_autoload =  null ;
            var disable_comment =  null ;

            if (disable_comment)
                  return;

            disqus_button.style.display = "";

            if (disqus_autoload){
                  disqus();
            }else{
                  disqus_button.addEventListener("click", disqus, false);
            }

            function disqus() {

                  if (!disqus_loaded) {
                        disqus_loaded = true;

                        var e = document.createElement("script");
                        e.type = "text/javascript";
                        e.async = true;
                        e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
                        (document.getElementsByTagName("head")[0] ||
                              document.getElementsByTagName("body")[0])
                        .appendChild(e);

                        
                        document.getElementById("show-comments").style.display = "none";
                  }
            }

            
            var hash = window.location.hash.substr(1);
            if (hash.length > 8) {
                  if (hash.substring(0, 8) == "comment-") {
                        disqus();
                  }
            }

            
            if (/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)) {
                  disqus();
            }
      })();
</script>

    
  





</main>
    <footer>
        <h6>Copyright © 2020 - Sungwoon Yoon |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://ynebula.github.io/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="https://ynebula.github.io/js/scripts.js"></script>


</body>

</html>

